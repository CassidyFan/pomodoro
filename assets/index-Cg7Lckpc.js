import{g as W,o as D,a as M,n as B,u as b,b as U,r as N,w as F,c as A,s as P,d as R,e as q,f as l,V as H,h as d,i as V,t as x,j as k,k as O,l as h}from"./index-BFhKDSCK.js";import{u as $}from"./list-f6zxEQ0s.js";import{u as z}from"./settings-C95jECCJ.js";import{V as J,a as K,b as E}from"./VCard-C_6fX1oO.js";function I(e){return W()?(D(e),!0):!1}function _(){const e=new Set,t=o=>{e.delete(o)};return{on:o=>{e.add(o);const r=()=>t(o);return I(r),{off:r}},off:t,trigger:(...o)=>Promise.all(Array.from(e).map(r=>r(...o)))}}function j(e){return typeof e=="function"?e():b(e)}const Q=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=Object.prototype.toString,Y=e=>X.call(e)==="[object Object]",Z=()=>{};function ee(e){return U()}function te(e,t=!0,n){ee()?M(e,n):t?e():B(e)}function ne(e){var t;const n=j(e);return(t=n==null?void 0:n.$el)!=null?t:n}const L=Q?window:void 0;function oe(...e){let t,n,i,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,i,o]=e,t=L):[t,n,i,o]=e,!t)return Z;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const r=[],s=()=>{r.forEach(u=>u()),r.length=0},v=(u,c,f,p)=>(u.addEventListener(c,f,p),()=>u.removeEventListener(c,f,p)),S=F(()=>[ne(t),j(o)],([u,c])=>{if(s(),!u)return;const f=Y(c)?{...c}:c;r.push(...n.flatMap(p=>i.map(y=>v(u,p,y,f))))},{immediate:!0,flush:"post"}),g=()=>{S(),s()};return I(g),g}function re(){const e=N(!1),t=U();return t&&M(()=>{e.value=!0},t),e}function se(e){const t=re();return A(()=>(t.value,!!e()))}function ie(e={}){const{window:t=L,requestPermissions:n=!0}=e,i=e,o=se(()=>{if(!t||!("Notification"in t))return!1;try{new Notification("")}catch{return!1}return!0}),r=N(o.value&&"permission"in Notification&&Notification.permission==="granted"),s=N(null),v=async()=>{if(o.value)return!r.value&&Notification.permission!=="denied"&&await Notification.requestPermission()==="granted"&&(r.value=!0),r.value},{on:S,trigger:g}=_(),{on:u,trigger:c}=_(),{on:f,trigger:p}=_(),{on:y,trigger:T}=_(),C=async a=>{if(!o.value||!r.value)return;const m=Object.assign({},i,a);return s.value=new Notification(m.title||"",m),s.value.onclick=g,s.value.onshow=c,s.value.onerror=p,s.value.onclose=T,s.value},w=()=>{s.value&&s.value.close(),s.value=null};if(n&&te(v),I(w),o.value&&t){const a=t.document;oe(a,"visibilitychange",m=>{m.preventDefault(),a.visibilityState==="visible"&&w()})}return{isSupported:o,notification:s,ensurePermissions:v,permissionGranted:r,show:C,close:w,onClick:S,onShow:u,onError:f,onClose:y}}const ae={class:"title"},ue={class:"time"},pe={__name:"index",setup(e){const t={STOP:0,COUNTING:1,PAUSE:2},n=N(t.STOP),i=$(),{currentItem:o,items:r,timeleft:s}=P(i),{setCurrentItem:v,countdown:S,setFinishItem:g}=i,u=z(),{selectedAlarmFile:c}=P(u);let f=0;const p=()=>{n.value===t.STOP&&r.value.length>0&&v(),n.value=t.COUNTING,f=setInterval(()=>{S(),s.value===0&&T()},1e3)},y=()=>{n.value=t.PAUSE,clearInterval(f)},T=()=>{clearInterval(f),n.value=t.STOP;const a=new Audio;a.src=c.value,a.play();const{show:m,isSupported:G}=ie({title:"Finished",body:o.value,icon:new URL(""+new URL("tomato-DWEDH35s.png",import.meta.url).href,import.meta.url).href});G.value&&m(),g(),r.value.length>0&&p()},C=A(()=>o.value.length>0?o.value:r.value.length>0?"Click Start":"No Matters"),w=A(()=>{const a=Math.floor(s.value/60).toString().padStart(2,"0"),m=(s.value%60).toString().padStart(2,"0");return a+":"+m});return(a,m)=>(R(),q(H,{class:"background"},{default:l(()=>[d(E,{justify:"center"},{default:l(()=>[d(J,{cols:"12",md:"8"},{default:l(()=>[d(K,{class:"pa-4 text-center"},{default:l(()=>[V("h1",ae,"Current Matter: "+x(C.value),1),V("h2",ue,"Time Left: "+x(w.value),1),d(E,{justify:"center",class:"mt-4"},{default:l(()=>[d(k,{color:"primary",onClick:p,disabled:n.value===t.COUNTING||b(o).length===0&&b(r).length===0},{default:l(()=>[d(O,{left:""},{default:l(()=>[h("mdi-play")]),_:1}),h(" Start ")]),_:1},8,["disabled"]),d(k,{color:"warning",onClick:y,disabled:n.value!==t.COUNTING},{default:l(()=>[d(O,{left:""},{default:l(()=>[h("mdi-pause")]),_:1}),h(" Pause ")]),_:1},8,["disabled"]),d(k,{color:"success",onClick:T,disabled:b(o).length===0},{default:l(()=>[d(O,{left:""},{default:l(()=>[h("mdi-skip-next")]),_:1}),h(" Next ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{pe as default};
